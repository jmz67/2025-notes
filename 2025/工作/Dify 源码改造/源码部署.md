```
cd docker
cp middleware.env.example middleware.env
```

```
docker compose -f docker-compose.middleware.yaml up -d
```

### 前端部署

```
pnpm install
```

不知道为什么，用这个方式才可以

### 后端部署

注意在 pyproject.toml 中把 chromadb 依赖项注释掉

```
poetry env activate
C:\Users\admin\Desktop\dev\dify\api\.venv\Scripts\activate.bat
```

```
(dify-api-py3.12) C:\Users\admin\Desktop\dev\dify\api>flask db upgrade

INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
INFO  [alembic.runtime.migration] Running upgrade  -> 64b051264f32, init
INFO  [alembic.runtime.migration] Running upgrade 64b051264f32 -> 9f4e3427ea84, add created by role
.......
```

```

```