假设后端 API 在某个域。

前端在另一个域，或（移动应用中）在同一个域的不同路径下。

并且，前端要使用后端的 **username** 与 **password** 验证用户身份。

固然，**FastAPI** 支持 **OAuth2** 身份验证。

但为了节省开发者的时间，不要只为了查找很少的内容，不得不阅读冗长的规范文档。

我们建议使用 **FastAPI** 的安全工具。

## 概述

首先，看看下面的代码是怎么运行的，然后再回过头来了解其背后的原理：

### 创建 main.py

把下面的示例代码复制到 main.py 

```python
from typing import Annotated

from fastapi import Depends, FastAPI 
from fastapi.security import OAuth2PasswordBearer

app = FastAPI()

oauth2_schema = OAuth2PasswordBearer(tokenUrl="token")

@app.get("/items/")
async def read_items(token: Annotated[str, Depends(oauth2_schema)]):
    return {
        "token": token 
    }
```


### 运行


### 查看文档


## 密码流


## FastAPI 的 OAuth2PasswordBearer


