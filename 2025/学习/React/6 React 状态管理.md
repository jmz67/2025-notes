React 组件的运作离不开数据。前一章构建的菜谱用户界面，如果没有菜谱数组，没有用处。整个应用的价值就体现在菜谱，配料和清晰的操作说明上。用户界面是创作人员制作内容的工具。为了给内容创作人员构建出最好的工具，我们需要知道如何有效地操作和修改数据。

前一章中构建了一个组件树 component tree。即具有一定的层次结构的组件，数据以属性的形式在其中流动。属性只起到一半的作用，另一半靠状态 state 。React 应用的状态在数据的驱动下改变。在我们开发的菜谱应用中引入状态后，厨师便可以新建菜谱，修改现有的菜谱和删除旧菜谱。

状态和属性之间有一定的关系。我们就根据这层关系把 React 应用中的不同组件紧密联系起来。当组件树的状态发生变化时，属性也随之改变。新数据沿着组件树流动，渲染特定枝叶上的组件，呈现新的内容。

本章引入状态，让应用鲜活起来。我们将学习如何创建有状态的组件，如何沿着组件树向下发送状态，以及如何沿着组件树向上反馈用户的交互。我们将学习从用户那里收集表单数据的方法，还将学习如何借助有状态的上下文供应组件，在应用中分离关注点。

## 6.1 构建一个星级评价组件

假如没有五星评价系统，我们肯定会吃到难吃的食物，看到难看的电影。如果你打算让用户参与到网站内容的建设中，那就需要一种方式来评价内容的优劣。这个时候，一个星级评价组件 StartRating 肯定是不可或缺的 React 组件。

StartRating 组件供用户为内容打分，给出心目中的星级数。较差的内容给一颗星，强烈推荐的内容获得五星。用户为内容打分时，直接点击某个星标即可。首先，我们需要一个星标。这个图标可以从 react-icons 中获取：

```
npm i react-icons
```

react-icons 是一个 npm 库，以 React 组件的形式分发，包含数百个 SVG 图标。安装这个库之后，我们便可以使用数个流行的图标库中的数百个 SVG 图标。这个库中包含的全部图标可以到它的网站中查看 [React Icons](https://react-icons.github.io/react-icons/) 。我们将使用 Font Awesome 中的星标：

```js
import React from "react"
import {FaStar} from 'react-icons/fa'

export default function StarRating() {
    return [
        <FaStar color="red" />,
        <FaStar color="red" />,
        <FaStar color="red" />,
        <FaStar color="grey" />,
        <FaStar color="grey" />
    ];
}
```

这里，我们创建一个 StarRating 组件，渲染从 react-icons 中导入的五个 SVG 星标。前三个星标填充红色，后两个填充灰色。首先渲染星标，是为了让自己知道要构建什么。我们将把选中的星标填充为红色，而未选中的则填充为灰色。下面来创建一个组件，根据 selected 属性自动为星标填充颜色：

```js
const Star = ({ selected = false }) => {
    <FaStar color={selected ? "red" : "grey"} />
};
```

Star 组件渲染单个星标，根据 selected 属性的值填充相应的颜色。如果没有把 selected 属性传给该组件，我们假定没有选中当前星标，填充默认的灰色。

五星评价系统十分流行，不过十星评价系统更为精准。在开发者把这个组件添加到自己的应用中时，我们应该让他们自行选择想使用多少颗星。为此，要在 StarRating 组件中添加一个 totalStar 属性：

